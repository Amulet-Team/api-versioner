This is the v2 example restructured into modules so we can work out some other issues.